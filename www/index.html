<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width">
    <title>Liveplay</title>

    <link href="lib/ionic/css/ionic.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    <link href="css/chat.css" rel="stylesheet">
    <link href="css/ion-floating-menu.css" rel="stylesheet">


    <!-- IF using Sass (run gulp sass first), then uncomment below and remove the CSS includes above
    <link href="css/ionic.app.css" rel="stylesheet">
    -->

    <!-- ionic/angularjs js -->
    <script src="lib/ionic/js/ionic.bundle.js"></script>

    <!-- cordova script (this will be a 404 during development) -->
    <script src="cordova.js"></script>

    <!-- your app's js -->
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/peer.js"></script>
    <script type="text/javascript" src="js/peerstream.js"></script>

  	<script type="text/javascript" src="js/buffering.js"></script>
  	<script type="text/javascript" src="js/peerconnection.js"></script>
	  <script src="js/app.js"></script>
    <script src="js/controllers.js"></script>
    <script src="js/ion-floating-menu.js"></script>

	<script>
		console.log(navigator.userAgent);

	var myid ;
	var partnerid ;
  var chatmessages;

	var context = new AudioContext();
	var chunkSize  = 256 * 1024; // bytes
	var currentFile ;
	var offset     = 0;
	var chunkBuffer;
	var nextChunkBuffer;
	var mediaSource = 0;
	var isStartPlay = false;
	var audioContextStartTime = 0;
	var elapsedBufferTime = 0;

	var index = 0;
	var fullFileBuffer = new Uint8Array(0);
	window.player		= "";
	var fileEntryURL = "";
	var currentBufferFile = 0;

	var endOfFile = false;
	var previousChunkDuration = 0;
	var elapsedTime = 0;
	var song;

	var $scope;
	var $ionicLoading;
	var $ionicSideMenuDelegate;
  var $http;


	var isApp = (navigator.userAgent.indexOf("Crosswalk") > -1);

	var selectedFileWeb = 0;
	var bufferBlob = new Uint8Array(0);
	var audio_player = 0;
	var prev_audio_player = 0;


	var ms = new MediaSource();

	var sourceBuffer = 0;


	function initIonicVars(scope,ionicloading,sidemenu,http){
		$scope = scope;
		$ionicLoading = ionicloading;
		$ionicSideMenuDelegate = sidemenu;
    $scope.sendToPeer = PeerStream.signal;
    $http = http;
	}

	function handleFileSelect(fileObj) {

		var files = fileObj.files;
		selectedFileWeb = files[0];
		 $scope.songSelected({name: files[0].name,filePath: ''});

	}
	</script>
	<style>
	 .bluecolor{
	 color : #387ef5 !important;
	 font-weight: bold !important;
	 }
	 .bold{
	 font-weight: bold !important;
	 }
	 .no-bottom-border{
	  border : none !important;
	 }
	 i.small-icon::before{
		font-size:16px !important;
	 }
	 .offline{
		color : gainsboro ;
	 }
	 .online{
		color : #33cd5f !important;
	 }
  </style>
  </head>

  <body ng-app="starter">
    <ion-nav-view></ion-nav-view>
  </body>
</html>
